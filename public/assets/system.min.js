(function(){'use strict';function forceLightTheme(){document.documentElement.classList.remove('dark','theme-dark');document.documentElement.setAttribute('data-theme','light');document.body.classList.remove('dark','theme-dark');document.documentElement.style.colorScheme='light';try{localStorage.removeItem('theme');localStorage.removeItem('hsfa-theme');localStorage.removeItem('darkMode');localStorage.removeItem('colorScheme');}catch(e){}updateThemeColor();}function updateThemeColor(){let metaTheme=document.querySelector('meta[name="theme-color"]');if(!metaTheme){metaTheme=document.createElement('meta');metaTheme.name='theme-color';document.head.appendChild(metaTheme);}metaTheme.content='#01717B';}function neutralizeThemeListeners(){const darkModeQuery=window.matchMedia('(prefers-color-scheme: dark)');darkModeQuery.onchange=null;darkModeQuery.addListener=function(){};darkModeQuery.addEventListener=function(){};if(window.toggleTheme){window.toggleTheme=function(){console.warn('HSFA: Alternância de tema desabilitada-usando apenas tema claro');};}if(window.setTheme){window.setTheme=function(theme){console.warn('HSFA: Forçando tema claro,ignorando:',theme);forceLightTheme();};}}function removeThemeToggles(){const themeToggles=document.querySelectorAll('#theme-toggle,.theme-toggle,.dark-mode-toggle,[data-theme-toggle]');themeToggles.forEach(toggle=>{toggle.remove();});const observer=new MutationObserver(function(mutations){mutations.forEach(function(mutation){if(mutation.type==='childList'){mutation.addedNodes.forEach(function(node){if(node.nodeType===1){const newToggles=node.querySelectorAll 
 ? node.querySelectorAll('#theme-toggle,.theme-toggle,.dark-mode-toggle'): [];newToggles.forEach(toggle=> toggle.remove());if(node.id==='theme-toggle' || 
 node.classList.contains('theme-toggle')||
 node.classList.contains('dark-mode-toggle')){node.remove();}}});}});});observer.observe(document.body,{childList: true,subtree: true});}function interceptThemeChanges(){const originalSetAttribute=Element.prototype.setAttribute;Element.prototype.setAttribute=function(name,value){if(name==='data-theme' && value==='dark'){console.warn('HSFA: Bloqueando mudança para tema escuro');return originalSetAttribute.call(this,name,'light');}return originalSetAttribute.call(this,name,value);};const originalAdd=DOMTokenList.prototype.add;DOMTokenList.prototype.add=function(...tokens){const filteredTokens=tokens.filter(token=> 
 !['dark','theme-dark','dark-mode'].includes(token));if(filteredTokens.length !==tokens.length){console.warn('HSFA: Bloqueando classes de tema escuro:',tokens);}return originalAdd.apply(this,filteredTokens);};}function initializeLightTheme(){forceLightTheme();neutralizeThemeListeners();interceptThemeChanges();if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',removeThemeToggles);}else{removeThemeToggles();}setTimeout(forceLightTheme,100);setTimeout(forceLightTheme,500);setTimeout(forceLightTheme,1000);console.log('HSFA: Tema claro forçado-Dark mode completamente desabilitado');}forceLightTheme();if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',initializeLightTheme);}else{initializeLightTheme();}window.addEventListener('load',forceLightTheme);setInterval(function(){if(document.documentElement.getAttribute('data-theme')!=='light' ||
 document.documentElement.classList.contains('dark')||
 document.body.classList.contains('dark')){console.warn('HSFA: Detectada tentativa de tema escuro-corrigindo...');forceLightTheme();}},2000);window.HSFA=window.HSFA ||{};window.HSFA.forceLightTheme=forceLightTheme;window.HSFA.updateThemeColor=updateThemeColor;})();;document.addEventListener('DOMContentLoaded',function(){initializeHSFALightTheme();initializeNotifications();initializeFormValidation();initializeAccessibility();initializeProgressiveEnhancement();console.log('HSFA: Sistema inicializado com tema claro forçado');});function initializeHSFALightTheme(){forceHSFALightTheme();try{localStorage.removeItem('hsfa-theme');localStorage.removeItem('theme');localStorage.removeItem('darkMode');localStorage.removeItem('colorScheme');}catch(e){}neutralizeSystemThemeListeners();setInterval(forceHSFALightTheme,2000);}function forceHSFALightTheme(){document.documentElement.setAttribute('data-theme','light');document.documentElement.style.colorScheme='light';document.documentElement.classList.remove('dark','theme-dark','dark-mode');document.body.classList.remove('dark','theme-dark','dark-mode');updateHSFAThemeColor();removeThemeToggles();}function neutralizeSystemThemeListeners(){const darkModeQuery=window.matchMedia('(prefers-color-scheme: dark)');darkModeQuery.onchange=null;darkModeQuery.addListener=function(){};darkModeQuery.addEventListener=function(){};darkModeQuery.removeEventListener=function(){};}function updateHSFAThemeColor(){let metaTheme=document.querySelector('meta[name="theme-color"]');if(!metaTheme){metaTheme=document.createElement('meta');metaTheme.name='theme-color';document.head.appendChild(metaTheme);}metaTheme.content='#01717B';}function removeThemeToggles(){const toggles=document.querySelectorAll('#theme-toggle,.theme-toggle,.dark-mode-toggle,[data-theme-toggle]');toggles.forEach(toggle=> toggle.remove());}function toggleTheme(){console.warn('HSFA: Alternância de tema desabilitada');}function setTheme(theme){console.warn('HSFA: Forçando tema claro,ignorando:',theme);forceHSFALightTheme();}function createThemeToggle(){console.log('HSFA: Botão de alternância desabilitado');}function initializeNotifications(){const urlParams=new URLSearchParams(window.location.search);if(urlParams.has('success')){showNotification(decodeURIComponent(urlParams.get('success')),'success');}if(urlParams.has('error')){showNotification(decodeURIComponent(urlParams.get('error')),'error');}if(urlParams.has('info')){showNotification(decodeURIComponent(urlParams.get('info')),'info');}}function showNotification(message,type='info',duration=5000){const notification=document.createElement('div');notification.className=`hsfa-notification hsfa-notification-${type}`;notification.innerHTML=`
 <div class="hsfa-notification-content">
 <i class="hsfa-notification-icon fas ${getNotificationIcon(type)}"></i>
 <span class="hsfa-notification-message">${message}</span>
 <button class="hsfa-notification-close" aria-label="Fechar notificação">
 <i class="fas fa-times"></i>
 </button>
 </div>
 `;document.body.appendChild(notification);setTimeout(()=>{notification.classList.add('hsfa-notification-show');},100);const autoClose=setTimeout(()=>{closeNotification(notification);},duration);const closeBtn=notification.querySelector('.hsfa-notification-close');closeBtn.addEventListener('click',()=>{clearTimeout(autoClose);closeNotification(notification);});return notification;}function closeNotification(notification){notification.classList.remove('hsfa-notification-show');setTimeout(()=>{if(notification.parentNode){notification.parentNode.removeChild(notification);}},300);}function getNotificationIcon(type){const icons={success: 'fa-check-circle',error: 'fa-exclamation-circle',warning: 'fa-exclamation-triangle',info: 'fa-info-circle'};return icons[type] || icons.info;}function initializeFormValidation(){const forms=document.querySelectorAll('form[data-validate]');forms.forEach(form=>{form.addEventListener('submit',function(e){if(!validateForm(this)){e.preventDefault();e.stopPropagation();}});const inputs=form.querySelectorAll('input,textarea,select');inputs.forEach(input=>{input.addEventListener('blur',()=> validateField(input));input.addEventListener('input',()=> clearFieldError(input));});});}function validateForm(form){let isValid=true;const inputs=form.querySelectorAll('input[required],textarea[required],select[required]');inputs.forEach(input=>{if(!validateField(input)){isValid=false;}});return isValid;}function validateField(field){const value=field.value.trim();const isRequired=field.hasAttribute('required');let isValid=true;let errorMessage='';if(isRequired && !value){isValid=false;errorMessage='Este campo é obrigatório.';}if(isValid && value){switch(field.type){case 'email':
 const emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!emailRegex.test(value)){isValid=false;errorMessage='Digite um e-mail válido.';}break;case 'tel':
 const phoneRegex=/^[\d\s\(\)\-\+]{10,}$/;if(!phoneRegex.test(value)){isValid=false;errorMessage='Digite um telefone válido.';}break;}}if(isValid){showFieldSuccess(field);}else{showFieldError(field,errorMessage);}return isValid;}function showFieldError(field,message){clearFieldStatus(field);field.classList.add('hsfa-field-error');const errorDiv=document.createElement('div');errorDiv.className='hsfa-field-error-message';errorDiv.textContent=message;field.parentNode.appendChild(errorDiv);}function showFieldSuccess(field){clearFieldStatus(field);field.classList.add('hsfa-field-success');}function clearFieldError(field){field.classList.remove('hsfa-field-error');const errorMessage=field.parentNode.querySelector('.hsfa-field-error-message');if(errorMessage){errorMessage.remove();}}function clearFieldStatus(field){field.classList.remove('hsfa-field-error','hsfa-field-success');const errorMessage=field.parentNode.querySelector('.hsfa-field-error-message');if(errorMessage){errorMessage.remove();}}function initializeAccessibility(){addSkipLinks();improveFocusManagement();enhanceKeyboardNavigation();updateAriaLabels();}function addSkipLinks(){if(document.querySelector('.hsfa-skip-links'))return;const skipLinks=document.createElement('div');skipLinks.className='hsfa-skip-links';skipLinks.innerHTML=`
 <a href="#main-content" class="hsfa-skip-link">Pular para o conteúdo principal</a>
 <a href="#main-navigation" class="hsfa-skip-link">Pular para a navegação</a>
 `;document.body.insertBefore(skipLinks,document.body.firstChild);}function improveFocusManagement(){document.addEventListener('keydown',function(e){if(e.key==='Tab'){document.body.classList.add('hsfa-keyboard-focus');}});document.addEventListener('mousedown',function(){document.body.classList.remove('hsfa-keyboard-focus');});}function enhanceKeyboardNavigation(){document.addEventListener('keydown',function(e){if(e.key==='Escape'){const modal=document.querySelector('.modal.show');if(modal){const bootstrap=window.bootstrap;if(bootstrap){bootstrap.Modal.getInstance(modal).hide();}}}});}function updateAriaLabels(){const forms=document.querySelectorAll('form');forms.forEach(form=>{const submitBtn=form.querySelector('button[type="submit"],input[type="submit"]');if(submitBtn && !submitBtn.hasAttribute('aria-label')){const formTitle=form.querySelector('h1,h2,h3')?.textContent || 'formulário';submitBtn.setAttribute('aria-label',`Enviar ${formTitle.toLowerCase()}`);}});}function initializeProgressiveEnhancement(){initializeLazyLoading();registerServiceWorker();preloadCriticalResources();}function initializeLazyLoading(){if('IntersectionObserver' in window){const images=document.querySelectorAll('img[data-src]');const imageObserver=new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting){const img=entry.target;img.src=img.dataset.src;img.classList.remove('lazy');imageObserver.unobserve(img);}});});images.forEach(img=> imageObserver.observe(img));}}function registerServiceWorker(){if('serviceWorker' in navigator){navigator.serviceWorker.register('/sw.js').then(registration=>{console.log('SW registrado:',registration);}).catch(error=>{console.log('SW falhou:',error);});}}function preloadCriticalResources(){const currentPage=window.location.pathname;if(currentPage.includes('/admin/')){preloadResource('/css/admin.css','style');preloadResource('/js/admin.js','script');}}function preloadResource(href,as){const link=document.createElement('link');link.rel='preload';link.href=href;link.as=as;document.head.appendChild(link);}window.HSFA=window.HSFA ||{};window.HSFA.showNotification=showNotification;window.HSFA.forceHSFALightTheme=forceHSFALightTheme;window.HSFA.validateForm=validateForm;;class NotificationSystem{constructor(){this.container=null;this.notifications=new Map();this.init();}init(){this.createContainer();this.setupKeyboardNavigation();}createContainer(){this.container=document.createElement('div');this.container.id='notification-container';this.container.className='notification-container';this.container.setAttribute('aria-live','polite');this.container.setAttribute('aria-atomic','false');this.container.style.cssText=`
 position: fixed;top: 1rem;right: 1rem;z-index: 1080;max-width: 400px;width: 100%;pointer-events: none;`;document.body.appendChild(this.container);}show(message,type='info',options={}){const config={id: options.id || this.generateId(),message: message,type: type,duration: options.duration || this.getDefaultDuration(type),dismissible: options.dismissible !==false,actions: options.actions || [],icon: options.icon || this.getDefaultIcon(type),title: options.title || this.getDefaultTitle(type),...options};if(this.notifications.has(config.id)){this.hide(config.id);}const notification=this.createNotification(config);this.container.appendChild(notification);this.notifications.set(config.id,notification);this.announceToScreenReader(message,type);if(config.duration > 0){setTimeout(()=>{this.hide(config.id);},config.duration);}return config.id;}createNotification(config){const notification=document.createElement('div');notification.className=`notification notification-${config.type}`;notification.setAttribute('role','alert');notification.setAttribute('aria-live','assertive');notification.setAttribute('data-notification-id',config.id);notification.style.cssText=`
 background: var(--color-bg-card);border: 1px solid var(--color-border-primary);border-left: 4px solid ${this.getTypeColor(config.type)};border-radius: var(--border-radius-lg);box-shadow: var(--shadow-lg);margin-bottom: 0.5rem;padding: 1rem;transform: translateX(100%);transition: transform 0.3s ease-in-out;pointer-events: auto;position: relative;`;let titleHtml='';if(config.title){titleHtml=`<div class="notification-title" style="font-weight: 600;margin-bottom: 0.5rem;color: var(--color-text-primary);">${config.title}</div>`;}let iconHtml='';if(config.icon){iconHtml=`<span class="notification-icon" style="margin-right: 0.5rem;font-size: 1.25rem;" aria-hidden="true">${config.icon}</span>`;}let actionsHtml='';if(config.actions && config.actions.length > 0){actionsHtml=`<div class="notification-actions" style="margin-top: 0.75rem;display: flex;gap: 0.5rem;">`;config.actions.forEach(action=>{actionsHtml+=`<button type="button" class="btn btn-sm ${action.class || 'btn-outline'}" onclick="${action.handler}">${action.label}</button>`;});actionsHtml+=`</div>`;}let closeButtonHtml='';if(config.dismissible){closeButtonHtml=`
 <button type="button" 
 class="notification-close" 
 onclick="notificationSystem.hide('${config.id}')"
 aria-label="Fechar notificação"
 style="position: absolute;top: 0.5rem;right: 0.5rem;background: none;border: none;font-size: 1.25rem;cursor: pointer;color: var(--color-text-muted);">
 ×
 </button>
 `;}notification.innerHTML=`
 ${closeButtonHtml}<div class="notification-content" style="display: flex;align-items: flex-start;">
 ${iconHtml}<div class="notification-body" style="flex: 1;">
 ${titleHtml}<div class="notification-message" style="color: var(--color-text-primary);">${config.message}</div>
 ${actionsHtml}</div>
 </div>
 `;requestAnimationFrame(()=>{notification.style.transform='translateX(0)';});return notification;}hide(id){const notification=this.notifications.get(id);if(!notification)return;notification.style.transform='translateX(100%)';setTimeout(()=>{if(notification.parentNode){notification.parentNode.removeChild(notification);}this.notifications.delete(id);},300);}hideAll(){this.notifications.forEach((notification,id)=>{this.hide(id);});}getDefaultDuration(type){const durations={success: 5000,info: 7000,warning: 8000,error: 10000};return durations[type] || 5000;}getDefaultIcon(type){const icons={success: '✓',error: '✗',warning: '⚠',info: 'ℹ'};return icons[type] || icons.info;}getDefaultTitle(type){const titles={success: 'Sucesso',error: 'Erro',warning: 'Atenção',info: 'Informação'};return titles[type] || 'Notificação';}getTypeColor(type){const colors={success: 'var(--color-success)',error: 'var(--color-error)',warning: 'var(--color-warning)',info: 'var(--color-info)'};return colors[type] || colors.info;}generateId(){return 'notification-'+Math.random().toString(36).substr(2,9);}announceToScreenReader(message,type){const announcement=document.createElement('div');announcement.setAttribute('aria-live','assertive');announcement.setAttribute('aria-atomic','true');announcement.className='sr-only';announcement.textContent=`${this.getDefaultTitle(type)}: ${message}`;document.body.appendChild(announcement);setTimeout(()=>{if(announcement.parentNode){announcement.parentNode.removeChild(announcement);}},1000);}setupKeyboardNavigation(){document.addEventListener('keydown',(e)=>{if(e.key==='Escape'){this.hideAll();}});}}class LoadingSystem{constructor(){this.loaders=new Map();}show(element,message='Carregando...'){const elementId=element.id || this.generateId();this.hide(element);const loader=document.createElement('div');loader.className='loading-overlay';loader.setAttribute('data-loader-id',elementId);loader.style.cssText=`
 position: absolute;top: 0;left: 0;right: 0;bottom: 0;background: rgba(255,255,255,0.9);display: flex;align-items: center;justify-content: center;z-index: 1000;border-radius: inherit;`;loader.innerHTML=`
 <div class="loading-spinner">
 <div class="spinner" style="width: 40px;height: 40px;border: 4px solid var(--color-border-primary);border-radius: 50%;border-top-color: var(--color-primary);animation: spin 1s linear infinite;"></div>
 <div style="margin-top: 1rem;color: var(--color-text-primary);font-weight: 500;">${message}</div>
 </div>
 `;const computedStyle=window.getComputedStyle(element);if(computedStyle.position==='static'){element.style.position='relative';}element.appendChild(loader);this.loaders.set(elementId,{element,loader});requestAnimationFrame(()=>{loader.style.opacity='0';loader.style.transition='opacity 0.3s ease-in-out';requestAnimationFrame(()=>{loader.style.opacity='1';});});}hide(element){const elementId=element.id || Array.from(this.loaders.keys()).find(id=> 
 this.loaders.get(id).element===element);if(!elementId || !this.loaders.has(elementId))return;const{loader}=this.loaders.get(elementId);if(loader && loader.parentNode){loader.style.opacity='0';setTimeout(()=>{if(loader.parentNode){loader.parentNode.removeChild(loader);}this.loaders.delete(elementId);},300);}}hideAll(){this.loaders.forEach(({loader},elementId)=>{if(loader && loader.parentNode){loader.parentNode.removeChild(loader);}});this.loaders.clear();}generateId(){return 'loader-'+Math.random().toString(36).substr(2,9);}}class FormValidator{constructor(form){this.form=form;this.rules={};this.init();}init(){this.form.addEventListener('submit',(e)=>{if(!this.validate()){e.preventDefault();this.focusFirstError();}});this.form.querySelectorAll('input,textarea,select').forEach(field=>{field.addEventListener('blur',()=>{this.validateField(field);});field.addEventListener('input',()=>{clearTimeout(field.validationTimeout);field.validationTimeout=setTimeout(()=>{this.validateField(field);},300);});});}addRule(fieldName,rule){this.rules[fieldName]=rule;}validate(){let isValid=true;const fields=this.form.querySelectorAll('input,textarea,select');fields.forEach(field=>{if(!this.validateField(field)){isValid=false;}});return isValid;}validateField(field){const fieldName=field.name;const rule=this.rules[fieldName];const value=field.value.trim();let isValid=true;let message='';this.clearFieldError(field);if(field.hasAttribute('required')&& !value){isValid=false;message='Este campo é obrigatório';}else if(value){if(field.type==='email'){const emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!emailRegex.test(value)){isValid=false;message='Por favor,insira um e-mail válido';}}if(field.type==='tel'){const phoneRegex=/^[\d\s\-\(\)\+]+$/;if(!phoneRegex.test(value)){isValid=false;message='Por favor,insira um telefone válido';}}if(field.type==='url'){try{new URL(value);}catch{isValid=false;message='Por favor,insira uma URL válida';}}if(rule){if(rule.minLength && value.length < rule.minLength){isValid=false;message=`Mínimo de ${rule.minLength}caracteres`;}else if(rule.maxLength && value.length > rule.maxLength){isValid=false;message=`Máximo de ${rule.maxLength}caracteres`;}else if(rule.pattern && !rule.pattern.test(value)){isValid=false;message=rule.message || 'Formato inválido';}}}if(!isValid){this.showFieldError(field,message);}else{this.showFieldSuccess(field);}return isValid;}showFieldError(field,message){field.classList.add('is-invalid');field.classList.remove('is-valid');field.setAttribute('aria-invalid','true');const errorElement=document.createElement('div');errorElement.className='invalid-feedback';errorElement.setAttribute('role','alert');errorElement.textContent=message;field.parentNode.appendChild(errorElement);field.setAttribute('aria-describedby',errorElement.id || 'error-'+field.name);}showFieldSuccess(field){field.classList.remove('is-invalid');field.classList.add('is-valid');field.removeAttribute('aria-invalid');const errorElement=field.parentNode.querySelector('.invalid-feedback');if(errorElement){errorElement.remove();}}clearFieldError(field){field.classList.remove('is-invalid','is-valid');field.removeAttribute('aria-invalid');const errorElement=field.parentNode.querySelector('.invalid-feedback');if(errorElement){errorElement.remove();}}focusFirstError(){const firstError=this.form.querySelector('.is-invalid');if(firstError){firstError.focus();firstError.scrollIntoView({behavior: 'smooth',block: 'center'});}}}const notificationSystem=new NotificationSystem();const loadingSystem=new LoadingSystem();const style=document.createElement('style');style.textContent=`
 @keyframes spin{to{transform: rotate(360deg);}}.sr-only{position: absolute !important;width: 1px !important;height: 1px !important;padding: 0 !important;margin:-1px !important;overflow: hidden !important;clip: rect(0,0,0,0)!important;white-space: nowrap !important;border: 0 !important;}`;document.head.appendChild(style);window.NotificationSystem=NotificationSystem;window.LoadingSystem=LoadingSystem;window.FormValidator=FormValidator;window.notificationSystem=notificationSystem;window.loadingSystem=loadingSystem;;document.addEventListener('DOMContentLoaded',function(){initializeThemeSystem();initializeFormValidation();initializeTooltips();initializeImagePreview();enhanceAccessibility();initializeTableResponsiveness();initializeKeyboardNavigation();});function initializeThemeSystem(){const savedTheme=localStorage.getItem('hsfa-theme');const systemTheme=window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';const currentTheme=savedTheme || systemTheme;setTheme(currentTheme);createThemeToggle();window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change',function(e){if(!localStorage.getItem('hsfa-theme')){setTheme(e.matches ? 'dark' : 'light');}});}function createThemeToggle(){if(document.getElementById('theme-toggle')){return;}const toggleButton=document.createElement('button');toggleButton.id='theme-toggle';toggleButton.className='theme-toggle';toggleButton.setAttribute('aria-label','Alternar entre modo claro e escuro');toggleButton.setAttribute('title','Alternar tema');toggleButton.innerHTML=`
 <i class="fas fa-moon dark-icon" aria-hidden="true"></i>
 <i class="fas fa-sun light-icon" aria-hidden="true"></i>
 `;toggleButton.addEventListener('click',toggleTheme);toggleButton.addEventListener('keydown',function(e){if(e.key==='Enter' || e.key===' '){e.preventDefault();toggleTheme();}});document.body.appendChild(toggleButton);}function toggleTheme(){const currentTheme=document.documentElement.getAttribute('data-theme');const newTheme=currentTheme==='dark' ? 'light' : 'dark';setTheme(newTheme);localStorage.setItem('hsfa-theme',newTheme);announceThemeChange(newTheme);}function setTheme(theme){document.documentElement.setAttribute('data-theme',theme);const toggleButton=document.getElementById('theme-toggle');if(toggleButton){const label=theme==='dark' 
 ? 'Alternar para modo claro' 
 : 'Alternar para modo escuro';toggleButton.setAttribute('aria-label',label);toggleButton.setAttribute('title',label);}updateThemeColor(theme);}function updateThemeColor(theme){let metaTheme=document.querySelector('meta[name="theme-color"]');if(!metaTheme){metaTheme=document.createElement('meta');metaTheme.name='theme-color';document.head.appendChild(metaTheme);}const colors={light: '#2E3A55',dark: '#1E293B'};metaTheme.content=colors[theme];}function announceThemeChange(theme){const announcement=document.createElement('div');announcement.setAttribute('aria-live','polite');announcement.setAttribute('aria-atomic','true');announcement.className='sr-only';announcement.textContent=`Tema alterado para modo ${theme==='dark' ? 'escuro' : 'claro'}`;document.body.appendChild(announcement);setTimeout(()=>{document.body.removeChild(announcement);},1000);}function initializeFormValidation(){const forms=document.querySelectorAll('form');forms.forEach(form=>{form.addEventListener('submit',function(e){if(!validateForm(this)){e.preventDefault();focusFirstError(this);}});const inputs=form.querySelectorAll('input,textarea,select');inputs.forEach(input=>{let timeoutId;input.addEventListener('input',function(){clearTimeout(timeoutId);timeoutId=setTimeout(()=>{validateField(this);},300);});input.addEventListener('blur',function(){validateField(this);});});});}function validateForm(form){let isValid=true;const requiredFields=form.querySelectorAll('[required]');requiredFields.forEach(field=>{if(!validateField(field)){isValid=false;}});return isValid;}function validateField(field){const value=field.value.trim();const isRequired=field.hasAttribute('required');let isValid=true;let message='';clearFieldError(field);if(isRequired && !value){isValid=false;message='Este campo é obrigatório';}if(value && field.type==='email'){const emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!emailRegex.test(value)){isValid=false;message='Por favor,insira um e-mail válido';}}if(value && field.type==='tel'){const phoneRegex=/^[\d\s\-\(\)\+]+$/;if(!phoneRegex.test(value)){isValid=false;message='Por favor,insira um telefone válido';}}if(!isValid){showFieldError(field,message);}return isValid;}function showFieldError(field,message){field.classList.add('is-invalid');field.setAttribute('aria-invalid','true');let errorElement=field.parentNode.querySelector('.invalid-feedback');if(!errorElement){errorElement=document.createElement('div');errorElement.className='invalid-feedback';errorElement.setAttribute('role','alert');field.parentNode.appendChild(errorElement);}errorElement.textContent=message;field.setAttribute('aria-describedby',errorElement.id || 'error-'+field.name);}function clearFieldError(field){field.classList.remove('is-invalid');field.removeAttribute('aria-invalid');const errorElement=field.parentNode.querySelector('.invalid-feedback');if(errorElement){errorElement.remove();}}function focusFirstError(form){const firstError=form.querySelector('.is-invalid');if(firstError){firstError.focus();firstError.scrollIntoView({behavior: 'smooth',block: 'center'});}}function initializeTooltips(){const tooltipElements=document.querySelectorAll('[data-bs-toggle="tooltip"]');tooltipElements.forEach(element=>{if(!element.getAttribute('aria-describedby')){element.setAttribute('aria-describedby','tooltip-'+Math.random().toString(36).substr(2,9));}});if(typeof bootstrap !=='undefined' && bootstrap.Tooltip){tooltipElements.forEach(element=>{new bootstrap.Tooltip(element);});}}function initializeImagePreview(){const fileInputs=document.querySelectorAll('input[type="file"][accept*="image"]');fileInputs.forEach(input=>{input.addEventListener('change',function(e){handleImagePreview(e.target);});});}function handleImagePreview(input){const file=input.files[0];if(!file)return;if(!file.type.startsWith('image/')){showAlert('Por favor,selecione apenas arquivos de imagem.','warning');input.value='';return;}if(file.size > 5*1024*1024){showAlert('A imagem deve ter no máximo 5MB.','warning');input.value='';return;}const reader=new FileReader();reader.onload=function(e){createImagePreview(input,e.target.result,file.name);};reader.readAsDataURL(file);}function createImagePreview(input,src,filename){let previewContainer=input.parentNode.querySelector('.image-preview');if(!previewContainer){previewContainer=document.createElement('div');previewContainer.className='image-preview mt-2';input.parentNode.appendChild(previewContainer);}previewContainer.innerHTML=`
 <div class="d-flex align-items-start gap-3">
 <img src="${src}" alt="Preview de ${filename}" class="preview-image" style="max-width: 200px;max-height: 150px;object-fit: cover;">
 <div class="flex-grow-1">
 <p class="mb-1"><strong>Arquivo:</strong> ${filename}</p>
 <button type="button" class="btn btn-sm btn-outline-danger" onclick="removeImagePreview(this)">
 <i class="fas fa-trash" aria-hidden="true"></i>
 Remover
 </button>
 </div>
 </div>
 `;}function removeImagePreview(button){const previewContainer=button.closest('.image-preview');const input=previewContainer.parentNode.querySelector('input[type="file"]');input.value='';previewContainer.remove();}function showAlert(message,type='info',duration=5000){const alertContainer=getOrCreateAlertContainer();const alertId='alert-'+Math.random().toString(36).substr(2,9);const alertElement=document.createElement('div');alertElement.id=alertId;alertElement.className=`alert alert-${type}alert-dismissible fade show`;alertElement.setAttribute('role','alert');alertElement.setAttribute('aria-live','assertive');alertElement.innerHTML=`
 ${message}<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Fechar alerta"></button>
 `;alertContainer.appendChild(alertElement);if(duration > 0){setTimeout(()=>{if(alertElement.parentNode){alertElement.remove();}},duration);}return alertElement;}function getOrCreateAlertContainer(){let container=document.getElementById('alert-container');if(!container){container=document.createElement('div');container.id='alert-container';container.className='position-fixed top-0 end-0 p-3';container.style.zIndex='9999';document.body.appendChild(container);}return container;}function enhanceTableAccessibility(){const tables=document.querySelectorAll('table');tables.forEach(table=>{if(!table.caption){const caption=document.createElement('caption');caption.className='sr-only';caption.textContent='Tabela de dados';table.appendChild(caption);}const headers=table.querySelectorAll('th');headers.forEach(header=>{if(!header.getAttribute('scope')){const isInThead=header.closest('thead');header.setAttribute('scope',isInThead ? 'col' : 'row');}});});}function addSkipLinks(){if(document.querySelector('.skip-links'))return;const skipLinks=document.createElement('div');skipLinks.className='skip-links';skipLinks.innerHTML=`
 <a href="#main-content" class="skip-to-main">
 Pular para o conteúdo principal
 </a>
 <a href="#sidebar" class="skip-to-nav">
 Pular para a navegação
 </a>
 `;document.body.insertBefore(skipLinks,document.body.firstChild);}document.addEventListener('DOMContentLoaded',function(){enhanceTableAccessibility();addSkipLinks();});const accessibilityStyles=`
 .sr-only{position: absolute !important;width: 1px !important;height: 1px !important;padding: 0 !important;margin:-1px !important;overflow: hidden !important;clip: rect(0,0,0,0)!important;white-space: nowrap !important;border: 0 !important;}.skip-links a{position: absolute;left:-9999px;z-index: 9999;background: var(--hsfa-primary);color: white;padding: 1rem;text-decoration: none;font-weight: 500;}.skip-links a:focus{left: 0;top: 0;}.theme-toggle{position: fixed;bottom: 1.5rem;right: 1.5rem;width: 50px;height: 50px;border-radius: 50%;background-color: var(--hsfa-secondary);color: var(--hsfa-text-light);border: none;display: flex;align-items: center;justify-content: center;cursor: pointer;box-shadow: 0 4px 10px rgba(0,0,0,0.2);z-index: 1000;transition: all 0.3s ease;}.theme-toggle:hover{transform: translateY(-3px);box-shadow: 0 6px 15px rgba(0,0,0,0.3);}.theme-toggle:focus-visible{outline: 2px solid var(--hsfa-primary);outline-offset: 3px;}.theme-toggle i{font-size: 1.25rem;}.dark-icon{display: block;}.light-icon{display: none;}[data-theme="dark"] .dark-icon{display: none;}[data-theme="dark"] .light-icon{display: block;}.image-preview{border: 2px dashed var(--border-color);border-radius: 0.5rem;padding: 1rem;background-color: var(--bg-card);}.preview-image{border-radius: 0.375rem;border: 1px solid var(--border-color);}`;const styleSheet=document.createElement('style');styleSheet.textContent=accessibilityStyles;document.head.appendChild(styleSheet);function enhanceAccessibility(){addSkipLinks();enhanceKeyboardNavigation();addIconLabels();enhanceColorContrast();enhanceFocusIndicators();}function addSkipLinks(){if(document.querySelector('.skip-links'))return;const skipLinks=document.createElement('div');skipLinks.className='skip-links';skipLinks.innerHTML=`
 <a href="#main-content" class="skip-to-main">
 Pular para o conteúdo principal
 </a>
 <a href="#main-navigation" class="skip-to-nav">
 Pular para a navegação
 </a>
 `;document.body.insertBefore(skipLinks,document.body.firstChild);}function enhanceKeyboardNavigation(){const navLinks=document.querySelectorAll('.nav-link');navLinks.forEach(link=>{link.addEventListener('keydown',function(e){if(e.key==='Enter' || e.key===' '){e.preventDefault();this.click();}});});const tables=document.querySelectorAll('table');tables.forEach(table=>{const cells=table.querySelectorAll('td,th');cells.forEach((cell,index)=>{cell.setAttribute('tabindex','0');cell.addEventListener('keydown',function(e){const nextCell=cells[index+1];const prevCell=cells[index-1];switch(e.key){case 'ArrowRight':
 e.preventDefault();if(nextCell)nextCell.focus();break;case 'ArrowLeft':
 e.preventDefault();if(prevCell)prevCell.focus();break;}});});});}function addIconLabels(){const icons=document.querySelectorAll('i[class*="fa-"]:not([aria-label]):not([title])');icons.forEach(icon=>{const parent=icon.parentElement;if(parent && !parent.textContent.trim()){const iconClass=icon.className;let label='';if(iconClass.includes('fa-home'))label='Início';else if(iconClass.includes('fa-plus'))label='Adicionar';else if(iconClass.includes('fa-edit'))label='Editar';else if(iconClass.includes('fa-trash'))label='Excluir';else if(iconClass.includes('fa-search'))label='Pesquisar';else if(iconClass.includes('fa-save'))label='Salvar';else if(iconClass.includes('fa-close'))label='Fechar';else if(iconClass.includes('fa-menu'))label='Menu';else if(iconClass.includes('fa-user'))label='Usuário';else if(iconClass.includes('fa-cog'))label='Configurações';else label='Ícone';icon.setAttribute('aria-label',label);}});}function enhanceColorContrast(){const elements=document.querySelectorAll('.btn,.badge,.alert,.card');elements.forEach(element=>{const computedStyle=window.getComputedStyle(element);const backgroundColor=computedStyle.backgroundColor;const color=computedStyle.color;if(element.classList.contains('btn-primary')|| element.classList.contains('btn-secondary')){element.style.textShadow='none';}});}function enhanceFocusIndicators(){const focusableElements=document.querySelectorAll('button,input,select,textarea,a,[tabindex]');focusableElements.forEach(element=>{element.addEventListener('focus',function(){this.style.outline='2px solid var(--color-primary)';this.style.outlineOffset='2px';});element.addEventListener('blur',function(){this.style.outline='';this.style.outlineOffset='';});});}function initializeTableResponsiveness(){const tables=document.querySelectorAll('table');tables.forEach(table=>{if(!table.classList.contains('table-mobile')){table.classList.add('table-mobile');}const headers=table.querySelectorAll('th');const rows=table.querySelectorAll('tbody tr');rows.forEach(row=>{const cells=row.querySelectorAll('td');cells.forEach((cell,index)=>{if(headers[index]){cell.setAttribute('data-label',headers[index].textContent.trim());}});});if(!table.caption){const caption=document.createElement('caption');caption.className='sr-only';caption.textContent='Tabela de dados';table.appendChild(caption);}});}function initializeKeyboardNavigation(){document.addEventListener('keydown',function(e){if(e.ctrlKey && e.key==='/'){e.preventDefault();const searchInput=document.querySelector('input[type="search"],input[placeholder*="buscar"],input[placeholder*="pesquisar"]');if(searchInput){searchInput.focus();}}if(e.key==='Escape'){const modals=document.querySelectorAll('.modal.show');modals.forEach(modal=>{const closeBtn=modal.querySelector('.btn-close,[data-bs-dismiss="modal"]');if(closeBtn)closeBtn.click();});}if(e.key==='Enter'){const focusedElement=document.activeElement;if(focusedElement && focusedElement.classList.contains('btn')){e.preventDefault();focusedElement.click();}}});}function showNotification(message,type='info',options={}){if(window.notificationSystem){return window.notificationSystem.show(message,type,options);}const alertContainer=getOrCreateAlertContainer();const alertId='alert-'+Math.random().toString(36).substr(2,9);const alertElement=document.createElement('div');alertElement.id=alertId;alertElement.className=`alert alert-${type}alert-dismissible fade show`;alertElement.setAttribute('role','alert');alertElement.setAttribute('aria-live','assertive');alertElement.innerHTML=`
 ${message}<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Fechar alerta"></button>
 `;alertContainer.appendChild(alertElement);setTimeout(()=>{if(alertElement.parentNode){alertElement.remove();}},5000);return alertId;}function showLoading(element,message='Carregando...'){if(window.loadingSystem){return window.loadingSystem.show(element,message);}const loader=document.createElement('div');loader.className='loading-overlay';loader.innerHTML=`
 <div class="loading-spinner">
 <div class="spinner"></div>
 <span>${message}</span>
 </div>
 `;element.style.position='relative';element.appendChild(loader);return loader;}function hideLoading(element){if(window.loadingSystem){return window.loadingSystem.hide(element);}const loader=element.querySelector('.loading-overlay');if(loader){loader.remove();}}function enhanceFormAccessibility(){const forms=document.querySelectorAll('form');forms.forEach(form=>{const inputs=form.querySelectorAll('input,textarea,select');inputs.forEach(input=>{if(!input.getAttribute('aria-describedby')){const errorId='error-'+input.name;input.setAttribute('aria-describedby',errorId);}const label=form.querySelector(`label[for="${input.id}"]`);if(label && !input.getAttribute('aria-label')){input.setAttribute('aria-label',label.textContent.trim());}});const requiredFields=form.querySelectorAll('[required]');requiredFields.forEach(field=>{const label=form.querySelector(`label[for="${field.id}"]`);if(label && !label.textContent.includes('*')){label.innerHTML+=' <span class="text-danger" aria-label="obrigatório">*</span>';}});});}document.addEventListener('DOMContentLoaded',function(){enhanceFormAccessibility();});;document.addEventListener('DOMContentLoaded',function(){const togglePassword=document.getElementById('togglePassword');const senhaInput=document.getElementById('senha');if(togglePassword && senhaInput){togglePassword.addEventListener('click',function(){const type=senhaInput.getAttribute('type')==='password' ? 'text' : 'password';senhaInput.setAttribute('type',type);const icon=this.querySelector('i');if(icon){icon.classList.toggle('fa-eye');icon.classList.toggle('fa-eye-slash');}});}const forms=document.querySelectorAll('.needs-validation');Array.from(forms).forEach(form=>{form.addEventListener('submit',function(event){if(!form.checkValidity()){event.preventDefault();event.stopPropagation();}form.classList.add('was-validated');});});const dropdownItems=document.querySelectorAll('.dropdown-toggle');Array.from(dropdownItems).forEach(item=>{item.addEventListener('click',function(event){event.preventDefault();const parent=this.parentElement;parent.classList.toggle('show');const submenu=document.getElementById(this.getAttribute('href').replace('#',''));if(submenu){submenu.classList.toggle('show');}});});const toggleMenu=document.getElementById('toggleMenu');const sidebar=document.querySelector('.sidebar');const content=document.querySelector('.content');const sidebarState=localStorage.getItem('sidebarCollapsed');if(sidebarState==='true'){sidebar.classList.add('collapsed');content.classList.add('expanded');}if(toggleMenu && sidebar && content){toggleMenu.addEventListener('click',function(){sidebar.classList.toggle('collapsed');content.classList.toggle('expanded');const isCollapsed=sidebar.classList.contains('collapsed');localStorage.setItem('sidebarCollapsed',isCollapsed);const icon=this.querySelector('i');if(icon){icon.style.transition='transform 0.3s ease';if(isCollapsed){icon.classList.remove('fa-bars');icon.classList.add('fa-angles-right');icon.style.transform='rotate(180deg)';}else{icon.classList.remove('fa-angles-right');icon.classList.add('fa-bars');icon.style.transform='rotate(0)';}}});const icon=toggleMenu.querySelector('i');if(icon && sidebar.classList.contains('collapsed')){icon.classList.remove('fa-bars');icon.classList.add('fa-angles-right');icon.style.transform='rotate(180deg)';}}const menuItems=document.querySelectorAll('.sidebar .list-unstyled li a');menuItems.forEach(item=>{const span=item.querySelector('span');if(span){const text=span.textContent.trim();item.setAttribute('data-title',text);}});const choicesElements=document.querySelectorAll('.choices-select');if(choicesElements.length > 0 && typeof Choices !=='undefined'){choicesElements.forEach(element=>{new Choices(element,{searchEnabled: true,itemSelectText: '',shouldSort: false,allowHTML: false,classNames:{containerOuter: 'choices choices-custom',}});});}const tooltipTriggerList=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));if(typeof bootstrap !=='undefined'){tooltipTriggerList.map(function(tooltipTriggerEl){return new bootstrap.Tooltip(tooltipTriggerEl);});}const autoCloseAlerts=document.querySelectorAll('.alert:not(.alert-permanent)');autoCloseAlerts.forEach(alert=>{setTimeout(()=>{const closeButton=alert.querySelector('.btn-close');if(closeButton){closeButton.click();}else{alert.classList.remove('show');setTimeout(()=>{alert.remove();},150);}},5000);});const dashboardCards=document.querySelectorAll('.dashboard-card');dashboardCards.forEach(card=>{card.addEventListener('mouseenter',function(){this.style.transform='translateY(-8px)';this.style.boxShadow='0 12px 28px rgba(0,0,0,0.15)';});card.addEventListener('mouseleave',function(){this.style.transform='translateY(0)';this.style.boxShadow='';});});const tables=document.querySelectorAll('.table');tables.forEach(table=>{if(!table.closest('.table-responsive')){const wrapper=document.createElement('div');wrapper.classList.add('table-responsive');table.parentNode.insertBefore(wrapper,table);wrapper.appendChild(table);}const rows=table.querySelectorAll('tbody tr');rows.forEach(row=>{row.addEventListener('mouseenter',function(){this.style.backgroundColor='var(--hsfa-bg-soft)';this.style.transition='background-color 0.2s ease';});row.addEventListener('mouseleave',function(){this.style.backgroundColor='';});});});const scrollableElements=document.querySelectorAll('.sidebar,.admin-main,.modal-body');scrollableElements.forEach(element=>{if(element.scrollHeight > element.clientHeight){element.classList.add('custom-scrollbar');}});const fadeInElements=document.querySelectorAll('.dashboard-card,.card');fadeInElements.forEach((element,index)=>{element.style.opacity='0';element.style.transform='translateY(20px)';element.style.transition='opacity 0.5s ease,transform 0.5s ease';setTimeout(()=>{element.style.opacity='1';element.style.transform='translateY(0)';},100+(index*50));});});;(function(){'use strict';const Utils={debounce(func,wait){let timeout;return function executedFunction(...args){const later=()=>{clearTimeout(timeout);func(...args);};clearTimeout(timeout);timeout=setTimeout(later,wait);};},throttle(func,limit){let inThrottle;return function(){const args=arguments;const context=this;if(!inThrottle){func.apply(context,args);inThrottle=true;setTimeout(()=> inThrottle=false,limit);}};},prefersReducedMotion(){return window.matchMedia('(prefers-reduced-motion: reduce)').matches;},generateId(){return 'hsfa-'+Math.random().toString(36).substr(2,9);},isElementVisible(element){const rect=element.getBoundingClientRect();return rect.top >=0 && rect.left >=0 && 
 rect.bottom <=window.innerHeight && 
 rect.right <=window.innerWidth;}};class TooltipManager{constructor(){this.tooltips=new Map();this.init();}init(){document.addEventListener('mouseenter',this.handleMouseEnter.bind(this),true);document.addEventListener('mouseleave',this.handleMouseLeave.bind(this),true);document.addEventListener('focus',this.handleFocus.bind(this),true);document.addEventListener('blur',this.handleBlur.bind(this),true);}handleMouseEnter(e){const element=e.target.closest('[data-tooltip]');if(element && !this.tooltips.has(element)){this.showTooltip(element);}}handleMouseLeave(e){const element=e.target.closest('[data-tooltip]');if(element){this.hideTooltip(element);}}handleFocus(e){const element=e.target.closest('[data-tooltip]');if(element && !this.tooltips.has(element)){this.showTooltip(element);}}handleBlur(e){const element=e.target.closest('[data-tooltip]');if(element){this.hideTooltip(element);}}showTooltip(element){const text=element.getAttribute('data-tooltip');const position=element.getAttribute('data-tooltip-position')|| 'top';if(!text)return;const tooltip=this.createTooltip(text,position);const elementRect=element.getBoundingClientRect();document.body.appendChild(tooltip);this.tooltips.set(element,tooltip);this.positionTooltip(tooltip,elementRect,position);requestAnimationFrame(()=>{tooltip.classList.add('show');});}hideTooltip(element){const tooltip=this.tooltips.get(element);if(tooltip){tooltip.classList.remove('show');setTimeout(()=>{if(tooltip.parentNode){tooltip.parentNode.removeChild(tooltip);}this.tooltips.delete(element);},Utils.prefersReducedMotion()? 0 : 150);}}createTooltip(text,position){const tooltip=document.createElement('div');tooltip.className=`hsfa-tooltip hsfa-tooltip-${position}`;tooltip.textContent=text;tooltip.setAttribute('role','tooltip');const arrow=document.createElement('div');arrow.className='hsfa-tooltip-arrow';tooltip.appendChild(arrow);return tooltip;}positionTooltip(tooltip,elementRect,position){const tooltipRect=tooltip.getBoundingClientRect();const spacing=8;let top,left;switch(position){case 'top':
 top=elementRect.top-tooltipRect.height-spacing;left=elementRect.left+(elementRect.width-tooltipRect.width)/2;break;case 'bottom':
 top=elementRect.bottom+spacing;left=elementRect.left+(elementRect.width-tooltipRect.width)/2;break;case 'left':
 top=elementRect.top+(elementRect.height-tooltipRect.height)/2;left=elementRect.left-tooltipRect.width-spacing;break;case 'right':
 top=elementRect.top+(elementRect.height-tooltipRect.height)/2;left=elementRect.right+spacing;break;}const viewportWidth=window.innerWidth;const viewportHeight=window.innerHeight;if(left < 0)left=spacing;if(left+tooltipRect.width > viewportWidth){left=viewportWidth-tooltipRect.width-spacing;}if(top < 0)top=spacing;if(top+tooltipRect.height > viewportHeight){top=viewportHeight-tooltipRect.height-spacing;}tooltip.style.top=`${top+window.scrollY}px`;tooltip.style.left=`${left+window.scrollX}px`;}}class LoadingManager{constructor(){this.loadingElements=new Set();this.init();}init(){document.addEventListener('submit',this.handleFormSubmit.bind(this));document.addEventListener('click',this.handleButtonClick.bind(this));}handleFormSubmit(e){const form=e.target;const submitButton=form.querySelector('button[type="submit"],input[type="submit"]');if(submitButton && !submitButton.disabled){this.setButtonLoading(submitButton);setTimeout(()=>{this.removeButtonLoading(submitButton);},30000);}}handleButtonClick(e){const button=e.target.closest('[data-loading]');if(button && !button.disabled){this.setButtonLoading(button);}}setButtonLoading(button){if(this.loadingElements.has(button))return;const originalContent=button.innerHTML;const loadingText=button.getAttribute('data-loading-text')|| 'Carregando...';button.setAttribute('data-original-content',originalContent);button.disabled=true;button.classList.add('loading');button.innerHTML=`
 <span class="hsfa-spinner" aria-hidden="true"></span>
 <span class="loading-text">${loadingText}</span>
 `;this.loadingElements.add(button);}removeButtonLoading(button){if(!this.loadingElements.has(button))return;const originalContent=button.getAttribute('data-original-content');if(originalContent){button.innerHTML=originalContent;button.removeAttribute('data-original-content');}button.disabled=false;button.classList.remove('loading');this.loadingElements.delete(button);}setElementLoading(element,text='Carregando...'){const loadingOverlay=document.createElement('div');loadingOverlay.className='hsfa-loading-overlay';loadingOverlay.innerHTML=`
 <div class="hsfa-loading-content">
 <div class="hsfa-spinner"></div>
 <span class="loading-text">${text}</span>
 </div>
 `;element.style.position='relative';element.appendChild(loadingOverlay);element.setAttribute('data-loading','true');}removeElementLoading(element){const overlay=element.querySelector('.hsfa-loading-overlay');if(overlay){overlay.remove();element.removeAttribute('data-loading');}}}class ToastManager{constructor(){this.container=null;this.toasts=[];this.init();}init(){this.createContainer();document.addEventListener('hsfa:toast',this.handleToastEvent.bind(this));}createContainer(){this.container=document.createElement('div');this.container.className='toast-container';this.container.setAttribute('aria-live','polite');this.container.setAttribute('aria-atomic','true');document.body.appendChild(this.container);}handleToastEvent(e){const{type,message,duration}=e.detail;this.show(message,type,duration);}show(message,type='info',duration=5000){const toast=this.createToast(message,type);this.container.appendChild(toast);this.toasts.push(toast);requestAnimationFrame(()=>{toast.classList.add('show');});setTimeout(()=>{this.hide(toast);},duration);if(this.toasts.length > 5){this.hide(this.toasts[0]);}return toast;}createToast(message,type){const toast=document.createElement('div');toast.className=`hsfa-toast hsfa-toast-${type}`;toast.setAttribute('role','alert');const icons={success: 'fas fa-check-circle',error: 'fas fa-exclamation-circle',warning: 'fas fa-exclamation-triangle',info: 'fas fa-info-circle'};toast.innerHTML=`
 <div class="hsfa-toast-content">
 <i class="${icons[type] || icons.info}" aria-hidden="true"></i>
 <span class="hsfa-toast-message">${message}</span>
 </div>
 <button type="button" class="hsfa-toast-close" aria-label="Fechar notificação">
 <i class="fas fa-times" aria-hidden="true"></i>
 </button>
 `;const closeButton=toast.querySelector('.hsfa-toast-close');closeButton.addEventListener('click',()=> this.hide(toast));return toast;}hide(toast){toast.classList.remove('show');setTimeout(()=>{if(toast.parentNode){toast.parentNode.removeChild(toast);}const index=this.toasts.indexOf(toast);if(index >-1){this.toasts.splice(index,1);}},Utils.prefersReducedMotion()? 0 : 300);}success(message,duration){return this.show(message,'success',duration);}error(message,duration){return this.show(message,'error',duration);}warning(message,duration){return this.show(message,'warning',duration);}info(message,duration){return this.show(message,'info',duration);}}class DropdownManager{constructor(){this.activeDropdown=null;this.init();}init(){document.addEventListener('click',this.handleClick.bind(this));document.addEventListener('keydown',this.handleKeydown.bind(this));}handleClick(e){const trigger=e.target.closest('[data-dropdown-trigger]');if(trigger){e.preventDefault();e.stopPropagation();this.toggle(trigger);}else{this.closeAll();}}handleKeydown(e){if(e.key==='Escape'){this.closeAll();}}toggle(trigger){const dropdown=trigger.closest('.hsfa-dropdown');if(this.activeDropdown && this.activeDropdown !==dropdown){this.close(this.activeDropdown);}if(dropdown.classList.contains('show')){this.close(dropdown);}else{this.open(dropdown);}}open(dropdown){dropdown.classList.add('show');this.activeDropdown=dropdown;const firstFocusable=dropdown.querySelector('a,button,input,[tabindex]');if(firstFocusable){firstFocusable.focus();}}close(dropdown){dropdown.classList.remove('show');if(this.activeDropdown===dropdown){this.activeDropdown=null;}}closeAll(){document.querySelectorAll('.hsfa-dropdown.show').forEach(dropdown=>{this.close(dropdown);});}}class ModalManager{constructor(){this.activeModal=null;this.init();}init(){document.addEventListener('click',this.handleClick.bind(this));document.addEventListener('keydown',this.handleKeydown.bind(this));}handleClick(e){const trigger=e.target.closest('[data-modal-trigger]');const close=e.target.closest('[data-modal-close]');const overlay=e.target.closest('.hsfa-modal-overlay');if(trigger){e.preventDefault();const modalId=trigger.getAttribute('data-modal-trigger');this.open(modalId);}else if(close ||(overlay && e.target===overlay)){e.preventDefault();this.close();}}handleKeydown(e){if(e.key==='Escape' && this.activeModal){this.close();}if(e.key==='Tab' && this.activeModal){this.trapFocus(e);}}open(modalId){const modal=document.getElementById(modalId);if(!modal)return;let overlay=modal.querySelector('.hsfa-modal-overlay');if(!overlay){overlay=document.createElement('div');overlay.className='hsfa-modal-overlay';modal.appendChild(overlay);}this.previouslyFocused=document.activeElement;modal.style.display='block';document.body.classList.add('modal-open');requestAnimationFrame(()=>{overlay.classList.add('show');modal.classList.add('show');});this.activeModal=modal;const firstFocusable=modal.querySelector('button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])');if(firstFocusable){firstFocusable.focus();}}close(){if(!this.activeModal)return;const modal=this.activeModal;const overlay=modal.querySelector('.hsfa-modal-overlay');modal.classList.remove('show');if(overlay){overlay.classList.remove('show');}setTimeout(()=>{modal.style.display='none';document.body.classList.remove('modal-open');if(this.previouslyFocused){this.previouslyFocused.focus();}},Utils.prefersReducedMotion()? 0 : 300);this.activeModal=null;}trapFocus(e){const modal=this.activeModal;const focusableElements=modal.querySelectorAll('button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])');const firstFocusable=focusableElements[0];const lastFocusable=focusableElements[focusableElements.length-1];if(e.shiftKey){if(document.activeElement===firstFocusable){lastFocusable.focus();e.preventDefault();}}else{if(document.activeElement===lastFocusable){firstFocusable.focus();e.preventDefault();}}}}class AnimationManager{constructor(){this.observer=null;this.init();}init(){if(!Utils.prefersReducedMotion()&& 'IntersectionObserver' in window){this.createObserver();this.observeElements();}}createObserver(){this.observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){this.animateElement(entry.target);this.observer.unobserve(entry.target);}});},{rootMargin: '50px',threshold: 0.1});}observeElements(){const elements=document.querySelectorAll('[data-animate]');elements.forEach(element=>{element.classList.add('animate-hidden');this.observer.observe(element);});}animateElement(element){const animation=element.getAttribute('data-animate')|| 'fadeIn';const delay=element.getAttribute('data-animate-delay')|| '0';setTimeout(()=>{element.classList.remove('animate-hidden');element.classList.add(`animate-${animation}`);},parseInt(delay));}refresh(){if(this.observer){this.observeElements();}}}class TableEnhancer{constructor(){this.init();}init(){this.enhanceSort();this.enhanceSelection();this.enhanceSearch();}enhanceSort(){document.querySelectorAll('[data-sortable]').forEach(header=>{header.style.cursor='pointer';header.addEventListener('click',()=>{this.sortTable(header);});if(!header.querySelector('.sort-icon')){const icon=document.createElement('i');icon.className='fas fa-sort sort-icon';icon.style.marginLeft='0.5rem';header.appendChild(icon);}});}sortTable(header){const table=header.closest('table');const tbody=table.querySelector('tbody');const rows=Array.from(tbody.querySelectorAll('tr'));const columnIndex=Array.from(header.parentNode.children).indexOf(header);const isAscending=!header.classList.contains('sort-asc');header.parentNode.querySelectorAll('th').forEach(th=>{th.classList.remove('sort-asc','sort-desc');const icon=th.querySelector('.sort-icon');if(icon){icon.className='fas fa-sort sort-icon';}});header.classList.add(isAscending ? 'sort-asc' : 'sort-desc');const icon=header.querySelector('.sort-icon');if(icon){icon.className=`fas fa-sort-${isAscending ? 'up' : 'down'}sort-icon`;}rows.sort((a,b)=>{const aValue=a.children[columnIndex].textContent.trim();const bValue=b.children[columnIndex].textContent.trim();const aNum=parseFloat(aValue);const bNum=parseFloat(bValue);let comparison=0;if(!isNaN(aNum)&& !isNaN(bNum)){comparison=aNum-bNum;}else{comparison=aValue.localeCompare(bValue);}return isAscending ? comparison :-comparison;});rows.forEach(row=> tbody.appendChild(row));}enhanceSelection(){document.querySelectorAll('[data-select-all]').forEach(checkbox=>{checkbox.addEventListener('change',(e)=>{const targetSelector=checkbox.getAttribute('data-select-all');const targets=document.querySelectorAll(targetSelector);targets.forEach(target=>{target.checked=e.target.checked;this.updateRowSelection(target);});});});document.querySelectorAll('[data-selectable]').forEach(checkbox=>{checkbox.addEventListener('change',(e)=>{this.updateRowSelection(e.target);});});}updateRowSelection(checkbox){const row=checkbox.closest('tr');if(row){row.classList.toggle('selected',checkbox.checked);}}enhanceSearch(){document.querySelectorAll('[data-table-search]').forEach(input=>{const tableSelector=input.getAttribute('data-table-search');const table=document.querySelector(tableSelector);if(table){const debouncedSearch=Utils.debounce((query)=>{this.searchTable(table,query);},300);input.addEventListener('input',(e)=>{debouncedSearch(e.target.value);});}});}searchTable(table,query){const rows=table.querySelectorAll('tbody tr');const searchTerm=query.toLowerCase();rows.forEach(row=>{const text=row.textContent.toLowerCase();const matches=text.includes(searchTerm);row.style.display=matches ? '' : 'none';});}}class SidebarManager{constructor(){this.sidebar=document.querySelector('.admin-sidebar');this.toggleButton=null;this.init();}init(){this.createToggleButton();this.handleResize();window.addEventListener('resize',Utils.debounce(()=>{this.handleResize();},100));}createToggleButton(){const topbar=document.querySelector('.admin-topbar .topbar-left');if(!topbar)return;this.toggleButton=document.createElement('button');this.toggleButton.className='hsfa-btn hsfa-btn-ghost sidebar-toggle';this.toggleButton.innerHTML='<i class="fas fa-bars"></i>';this.toggleButton.setAttribute('aria-label','Alternar menu lateral');this.toggleButton.style.display='none';this.toggleButton.addEventListener('click',()=>{this.toggle();});topbar.insertBefore(this.toggleButton,topbar.firstChild);}toggle(){document.body.classList.toggle('sidebar-open');}handleResize(){if(window.innerWidth <=1024){this.toggleButton.style.display='flex';document.body.classList.remove('sidebar-open');}else{this.toggleButton.style.display='none';document.body.classList.remove('sidebar-open');}}}function domReady(callback){if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',callback);}else{callback();}}domReady(()=>{if(!document.body.classList.contains('body-admin')){return;}const tooltipManager=new TooltipManager();const loadingManager=new LoadingManager();const toastManager=new ToastManager();const dropdownManager=new DropdownManager();const modalManager=new ModalManager();const animationManager=new AnimationManager();const tableEnhancer=new TableEnhancer();const sidebarManager=new SidebarManager();addComponentStyles();window.HSFA={toast: toastManager,loading: loadingManager,modal: modalManager,animation: animationManager,utils: Utils};document.dispatchEvent(new CustomEvent('hsfa:ready'));});function addComponentStyles(){const styles=`
 .hsfa-tooltip{position: absolute;z-index: 1070;background-color: rgba(0,0,0,0.9);color: white;padding: 6px 12px;border-radius: 4px;font-size: 12px;max-width: 200px;word-wrap: break-word;opacity: 0;transform: scale(0.8);transition: opacity 150ms ease-in-out,transform 150ms ease-in-out;pointer-events: none;}.hsfa-tooltip.show{opacity: 1;transform: scale(1);}.hsfa-tooltip-arrow{position: absolute;width: 0;height: 0;border: 5px solid transparent;}.hsfa-tooltip-top .hsfa-tooltip-arrow{bottom:-10px;left: 50%;transform: translateX(-50%);border-top-color: rgba(0,0,0,0.9);}.hsfa-tooltip-bottom .hsfa-tooltip-arrow{top:-10px;left: 50%;transform: translateX(-50%);border-bottom-color: rgba(0,0,0,0.9);}.hsfa-tooltip-left .hsfa-tooltip-arrow{right:-10px;top: 50%;transform: translateY(-50%);border-left-color: rgba(0,0,0,0.9);}.hsfa-tooltip-right .hsfa-tooltip-arrow{left:-10px;top: 50%;transform: translateY(-50%);border-right-color: rgba(0,0,0,0.9);}.hsfa-loading-overlay{position: absolute;top: 0;left: 0;right: 0;bottom: 0;background-color: rgba(255,255,255,0.8);display: flex;align-items: center;justify-content: center;z-index: 10;}.hsfa-loading-content{display: flex;flex-direction: column;align-items: center;gap: 12px;}.hsfa-loading-content .loading-text{font-size: 14px;color: #6c757d;}.toast-container{position: fixed;top: 24px;right: 24px;z-index: 1070;max-width: 400px;pointer-events: none;}.hsfa-toast{background-color: white;border: 1px solid #dee2e6;border-radius: 8px;box-shadow: 0 10px 15px-3px rgba(0,0,0,0.1);margin-bottom: 12px;padding: 16px;display: flex;align-items: flex-start;gap: 12px;transform: translateX(100%);transition: transform 300ms ease-in-out;pointer-events: auto;}.hsfa-toast.show{transform: translateX(0);}.hsfa-toast-content{flex: 1;display: flex;align-items: center;gap: 8px;}.hsfa-toast-message{font-size: 14px;line-height: 1.4;}.hsfa-toast-close{background: none;border: none;color: #6c757d;cursor: pointer;padding: 0;width: 20px;height: 20px;display: flex;align-items: center;justify-content: center;border-radius: 4px;transition: background-color 150ms ease-in-out;}.hsfa-toast-close:hover{background-color: #f8f9fa;}.hsfa-toast-success{border-left: 4px solid #198754;}.hsfa-toast-success i{color: #198754;}.hsfa-toast-error{border-left: 4px solid #dc3545;}.hsfa-toast-error i{color: #dc3545;}.hsfa-toast-warning{border-left: 4px solid #ffc107;}.hsfa-toast-warning i{color: #ffc107;}.hsfa-toast-info{border-left: 4px solid #0dcaf0;}.hsfa-toast-info i{color: #0dcaf0;}.animate-hidden{opacity: 0;transform: translateY(20px);}.animate-fadeIn{animation: fadeIn 600ms ease-out forwards;}.animate-slideUp{animation: slideUp 600ms ease-out forwards;}.animate-slideLeft{animation: slideLeft 600ms ease-out forwards;}@keyframes fadeIn{to{opacity: 1;transform: translateY(0);}}@keyframes slideUp{to{opacity: 1;transform: translateY(0);}}@keyframes slideLeft{to{opacity: 1;transform: translateX(0);}}.hsfa-table tbody tr.selected{background-color: rgba(96,176,204,0.1);}body.modal-open{overflow: hidden;}.sidebar-toggle{margin-right: 16px;}@media(max-width: 1024px){body.body-admin.sidebar-open::before{content: '';position: fixed;top: 0;left: 0;right: 0;bottom: 0;background-color: rgba(0,0,0,0.5);z-index: 1020;}}@media(prefers-reduced-motion: reduce){.hsfa-tooltip,.hsfa-toast,.animate-fadeIn,.animate-slideUp,.animate-slideLeft{animation: none !important;transition: none !important;}.animate-hidden{opacity: 1;transform: none;}}`;const styleSheet=document.createElement('style');styleSheet.textContent=styles;document.head.appendChild(styleSheet);}})();;